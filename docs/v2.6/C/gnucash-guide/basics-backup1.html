<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>2.6. Backing Up and Recovering Data</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="GnuCash Tutorial and Concepts Guide"><link rel="up" href="chapter_basics.html" title="Chapter 2. The Basics"><link rel="prev" href="basics-files1.html" title="2.5. Storing your financial data"><link rel="next" href="basics-migrate-settings.html" title="2.7. Migrating GnuCash data"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.6. Backing Up and Recovering Data</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-files1.html">&lt;&lt;&lt; Prev</a> </td><th width="60%" align="center">Chapter 2. The Basics</th><td width="20%" align="right"> <a accesskey="n" href="basics-migrate-settings.html">Next &gt;&gt;&gt;</a></td></tr></table><hr></hr></div><div class="sect1" title="2.6. Backing Up and Recovering Data"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="basics-backup1"></a>2.6. Backing Up and Recovering Data</h2></div></div></div><p><strong class="application"><code>GnuCash</code></strong> creates several types of files to help ensure that your data
    is not lost. If you look in the folder where your saved file resides, you may see other
    files generated by <strong class="application"><code>GnuCash</code></strong> with the following extensions: <code class="filename">.gnucash</code>,
    <code class="filename">.log</code>, <code class="filename">.LCK</code>, <code class="filename">.LNK</code> in the same directory 
    as your primary data file. What each of these files does is presented below.</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">The following sections are relevant only if you are saving your financial data in the <acronym class="acronym">XML</acronym> format</p></td></tr></table></div><pre class="programlisting">
      $ ls 
      myfile.gnucash
      myfile.gnucash.20100414185747.gnucash
      myfile.gnucash.20100414223248.log
      myfile.gnucash.20100415114340.gnucash
      myfile.gnucash.20100415154508.log
      myfile.gnucash.20100415173322.gnucash
      myfile.gnucash.20100415194251.log
      myfile.gnucash.7f0982.12093.LNK
      myfile.gnucash.LCK
    </pre><div class="sect2" title="2.6.1. Backup file (.gnucash)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backupxac2"></a>2.6.1. Backup file (.gnucash)</h3></div></div></div><p>Each time you save your data file, a backup copy will also be
      saved with the extension <code class="filename">.YYYYMMDDHHMMSS.gnucash</code>. This backup file is a complete copy of
      your previous data file, and the filename format refers to the data
      file, year, month, day and time of the backup. For example, the filename
      <code class="filename">myfile.gnucash.20100414185747.gnucash</code> indicates this is a
      backup copy of the file <code class="filename">myfile</code> saved in the year 
      2010, April 14, at 6:57:47 p.m.</p><p>To restore an old backup file, simply open the <code class="filename">.YYYYMMDDHHMMSS.gnucash</code> file with the
      date to which you wish to return. Be sure to save this file under a
      different name.</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns=""><strong class="application"><code>GnuCash</code></strong> versions 2.3.15 and older create backup files with the old extension
         <code class="filename">.YYYYMMDDHHMMSS.xac</code> instead of the actual extension <code class="filename">.YYYYMMDDHHMMSS.gnucash</code>. 
         So if you upgrade from the 2.2 series to the 2.4 series, you may end up with both <code class="filename">.YYYYMMDDHHMMSS.xac</code> 
         and <code class="filename">.YYYYMMDDHHMMSS.gnucash</code> backup files in your directory.</p></td></tr></table></div></div><div class="sect2" title="2.6.2. Log file (.log)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backuplog2"></a>2.6.2. Log file (.log)</h3></div></div></div><p>Each time you open and edit a file in <strong class="application"><code>GnuCash</code></strong>, 
      <strong class="application"><code>GnuCash</code></strong> creates a log file of changes you have made to your data file. 
      The log file uses a similar naming format as the backup files:
      <code class="filename">.YYYYMMDDHHMMSS.log</code>. Log files
      are not a full backup of your data file - they simply record changes you
      have made to the data file in the current <strong class="application"><code>GnuCash</code></strong> session.</p><p>In case you exit <strong class="application"><code>GnuCash</code></strong> inadvertently, possibly due to a power
      outage or a system wide crash, it is possible to recover most of your
      work since the last time you saved your <strong class="application"><code>GnuCash</code></strong> file using this log
      file. This is the procedure:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Open the last saved <strong class="application"><code>GnuCash</code></strong> file.</p></li><li class="listitem"><p>Go to <span class="guimenu"><strong>File</strong></span> → <span class="guisubmenu"><strong>Import</strong></span> → <span class="guimenuitem"><strong>Replay GnuCash .log file</strong></span>
          and select the one .log file with the same date as the saved file
          you just opened. Make sure that you picked the right .log file, or
          you will possibly wreak havoc in your accounts.</p></li></ol></div><p>Log replaying will recover any transaction affecting the balance
      entered since the last save, including those created from scheduled
      transactions and business features (invoices, bills, etc.).</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/warning.png"></img></td><th align="left" valign="top">Warning</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">Changes to the scheduled transactions, invoices or
        bills themselves are NOT recovered, and their transactions that were
        recovered may not be properly associated with them, and should thus be
        double-checked. Especially for business transactions, you may have to
        delete and re-create some of them. If you do not, although the balance
        will be correct, some reports may not.</p></td></tr></table></div></div><div class="sect2" title="2.6.3. Lock files (.LNK and .LCK)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backuplock2"></a>2.6.3. Lock files (.LNK and .LCK)</h3></div></div></div><p>You may occasionally see <code class="filename">.LNK</code> and <code class="filename">.LCK</code> files appear. These do not
      store any data, but they are created to prevent more than one user from
      opening the same file at the same time. These files are automatically
      created when you open the file, to lock it so no one else can access it.
      When you close your <strong class="application"><code>GnuCash</code></strong> session or open another file, <strong class="application"><code>GnuCash</code></strong>
      unlocks the first data file by deleting the <code class="filename">.LCK</code> and <code class="filename">.LNK</code> files.</p><p>If <strong class="application"><code>GnuCash</code></strong> crashes while you have a data file open, the <code class="filename">.LCK</code> and
      <code class="filename">.LNK</code> files are not deleted. The next time you try to open <strong class="application"><code>GnuCash</code></strong>, you
      will get a warning message that the file is locked. The warning message
      appears because the <code class="filename">.LNK</code> and <code class="filename">.LCK</code> files are still in your directory. It is
      safe to choose <span class="guibutton">Yes</span> to open the file, but you should delete the <code class="filename">.LNK</code> and
      <code class="filename">.LCK</code> files (using a terminal window or your file manager). Once those
      files are deleted, you will not get the warning message again unless
      <strong class="application"><code>GnuCash</code></strong> crashes.</p></div><div class="sect2" title="2.6.4. File Management"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backupmanage2"></a>2.6.4. File Management</h3></div></div></div><p>So which files should you keep around? Keep your main data file,
      of course. It’s a
      good idea to keep some of the more recent <code class="filename">.YYYYMMDDHHMMSS.gnucash</code> backup files, but you can safely
      delete the <code class="filename">.log</code> files since they are not complete copies of your data.</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">If you upgraded from a <strong class="application"><code>GnuCash</code></strong> version prior to 2.4, you may also have backup files
        in the old <code class="filename">.xac</code> format. For these files you can apply the same principle described above for
        <code class="filename">.YYYYMMDDHHMMSS.gnucash</code> backup files.</p></td></tr></table></div><p>You should also delete any <code class="filename">.LCK</code> and <code class="filename">.LNK</code> files that you see after
      closing <strong class="application"><code>GnuCash</code></strong>. If you decide to back up your data file to another
      disk manually, it’s enough to back up the main data file - not the <code class="filename">.YYYYMMDDHHMMSS.gnucash</code>
      backup files.</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">By default <strong class="application"><code>GnuCash</code></strong> will automatically delete any <code class="filename">.log</code> and <code class="filename">.YYYYMMDDHHMMSS.gnucash</code>
        backup files that are older than 30 days. You can change this behavior in the <strong class="application"><code>GnuCash</code></strong>
        preferences in the <span class="guilabel"><strong>General</strong></span> tab under <span class="guimenu"><strong>Edit</strong></span> → <span class="guimenuitem"><strong>Preferences</strong></span>
        (<span class="guimenu"><strong>GnuCash</strong></span> → <span class="guimenuitem"><strong>Preferences</strong></span> on Mac OS X).</p></td></tr></table></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-files1.html">&lt;&lt;&lt; Prev</a> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-migrate-settings.html">Next &gt;&gt;&gt;</a></td></tr><tr><td width="40%" align="left">2.5. Storing your financial data </td><td width="20%" align="center"><a accesskey="u" href="chapter_basics.html">Up</a></td><td width="40%" align="right"> 2.7. Migrating <strong xmlns="" class="application"><code>GnuCash</code></strong> data</td></tr></table></div></body></html>
