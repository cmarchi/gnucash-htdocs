<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>2.8. データのバックアップとリカバリ</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="GnuCash チュートリアル・コンセプト ガイド"><link rel="up" href="chapter_basics.html" title="第2章 基礎"><link rel="prev" href="basics-import1.html" title="2.7. QIFファイルのインポート"><link rel="next" href="basics-together1.html" title="2.9. まとめ"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.8. データのバックアップとリカバリ</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-import1.html">&lt;&lt;&lt; 前のページ</a> </td><th width="60%" align="center">第2章 基礎</th><td width="20%" align="right"> <a accesskey="n" href="basics-together1.html">次のページ &gt;&gt;&gt;</a></td></tr></table><hr></hr></div><div class="sect1" title="2.8. データのバックアップとリカバリ"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="basics-backup1"></a>2.8. データのバックアップとリカバリ</h2></div></div></div><p>GnuCashは、データが無くならないのを確実にするためにいくつかの種類のファイルを作成します。次の拡張子があるファイルが存在します。一次データファイルと同じディレクトリにあるxac、log、LCK、およびLNKです。それぞれのファイルが何をするかを以下に説明します。</p><pre class="programlisting">
      $ ls 
      gcashdata
      gcashdata.20060414185747.xac
      gcashdata.20060414223248.log
      gcashdata.20060415114340.xac
      gcashdata.20060415154508.log
      gcashdata.20060415173322.xac
      gcashdata.20060415194251.log
      gcashdata.7f0982.12093.LNK
      gcashdata.LCK
    </pre><div class="sect2" title="2.8.1. バックアップファイル(.xac)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backupxac2"></a>2.8.1. バックアップファイル(.xac)</h3></div></div></div><p>データファイルを保存したときは毎回、バックアップコピーが拡張子xacで保存されます。このバックアップファイル前のデータファイルの完全な複製です。そして、ファイル名の形式はバックアップのデータファイル、年、月、日、および時間を表します。例えば、ファイル名<code class="filename">gcashdata.20060414185747.xac</code>は、2006年4月14日午後6時57分47秒に保存されたgcashdataのバックアップコピーであることを示します。</p><p>古いバックアップファイルを復元するためには、単に戻りたい日時の.xacファイルを開いてください。必ず異なった名前でこのファイルを保存してください。通常のデータファイル名に.xac拡張子を使用してはいけません。</p></div><div class="sect2" title="2.8.2. ログファイル(.log)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backuplog2"></a>2.8.2. ログファイル(.log)</h3></div></div></div><p>GnuCashのファイルを開くと毎回、.logファイルが.xacバックアップファイルと同じ名前の形式で作成・保存されます。開いているデータファイルへの変更を行うとき、ログファイルはそれらの変更だけを保存します。ログファイルはデータファイルのフルバックアップではありません。単に現在のGnuCashセッション中にデータファイルに行った変更を記録します。</p><p>停電またはシステム全体のクラッシュのためうっかりGnuCashを終了したとしても、このログファイルを使用することでGnuCashファイルを保存した最後の時以降の作業の大部分を回復することが可能です。方法は次のようになります。</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>最後に保存しているGnuCashファイルを開きます。</p></li><li class="listitem"><p><span class="guimenu"><strong>ファイル</strong></span>-&gt;<span class="guimenuitem"><strong>インポート</strong></span>-&gt;<span class="guimenuitem"><strong>GnuCashの.log fileをリプレイ</strong></span>を選択し、今開いている保存済ファイルと同じ日時をもつログファイルを選択します。確実に正しい.logファイルを選んでください。さもなければ、勘定科目が大きく破壊されるかもしれません。</p></li></ul></div><p>ログリプレイは最後の保存以降入力された残高に影響するどんな取引も回復します。予定取引とビジネス機能(得意先請求書、仕入先請求書など)から作成されたものを含んでいます。</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">注記</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">警告 : 予定取引、得意先請求書または仕入先請求書自体への変更は回復されません。回復された取引は、適切に関連付けられないかもしれません。したがって、再確認するべきです。特にビジネス取引ではいくつかを削除して作り直さなければならないかもしれません。そうしないと、貸借残高が正しくなったにもかかわらず帳票は正しくないかもしれません。</p></td></tr></table></div></div><div class="sect2" title="2.8.3. ロックファイル(.LNKと.LCK)"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backuplock2"></a>2.8.3. ロックファイル(.LNKと.LCK)</h3></div></div></div><p>時折.LNKと.LCKファイルが現れるるのを見ることができます。これらはデータを全く保存しません。2人以上のユーザが同時に同じファイルを開くのを防ぐために作成されます。ファイルを開くと、他の誰もアクセスできないようロックするために、これらのファイルが自動的に作成されます。GnuCashセッションを閉じるか、または別のファイルを開くと、GnuCashは、LCKとLNKファイルを削除し、最初のデータファイルをアンロックします。</p><p>データファイルを開いている際にGnuCashがクラッシュすると、LCK、およびLNKファイルが削除されません。GnuCashで次に開こうとすると、ファイルがロックされているという警告メッセージが表示されます。ファイルを開くためにはいを選ぶのが安全です。しかし.LNKと.LCKファイルを削除するべきです。(端末ウィンドウまたはファイルマネージャを使用してください。)ファイルがいったん削除されると、GnuCashがクラッシュしない限り、再び警告メッセージは表示されません。</p></div><div class="sect2" title="2.8.4. ファイル管理"><div class="titlepage"><div><div><h3 class="title"><a name="basics-backupmanage2"></a>2.8.4. ファイル管理</h3></div></div></div><p>どのファイルを取っておくべきでしょうか? もちろん主データファイルを取っておいてください。自動的に付けられた拡張子を持っていないデータファイルです。最近の.xacファイルをいくつか取っておくのは名案です。.logファイルはデータの完全なコピーではないので安全に削除することができます。また、GnuCashを閉じた後に.LCKと.LNKファイルがある場合はこれらも削除するべきです。手動で別のディスクにデータファイルをバックアップすると決めるなら主データファイルだけをバックアップする必要があります。.xacファイルは必要ありません。</p><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0"><tr><td rowspan="2" align="center" valign="top" width="25"><img src="./stylesheet/note.png"></img></td><th align="left" valign="top">注記</th></tr><tr><td colspan="2" align="left" valign="top"><p xmlns="">GnuCashは自動的に30日間より古い全ての.xac、.log ファイルを削除します。GnuCash設定においてこの動作を変えることができます。</p></td></tr></table></div></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr></hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-import1.html">&lt;&lt;&lt; 前のページ</a> </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-together1.html">次のページ &gt;&gt;&gt;</a></td></tr><tr><td width="40%" align="left">2.7. QIFファイルのインポート </td><td width="20%" align="center"><a accesskey="u" href="chapter_basics.html">上に戻る</a></td><td width="40%" align="right"> 2.9. まとめ</td></tr></table></div></body></html>
